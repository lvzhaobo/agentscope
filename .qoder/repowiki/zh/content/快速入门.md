# 快速入门

<cite>
**本文档中引用的文件**  
- [README.md](file://README.md)
- [README_zh.md](file://README_zh.md)
- [pyproject.toml](file://pyproject.toml)
- [src\agentscope\__init__.py](file://src/agentscope/__init__.py)
- [docs\tutorial\zh_CN\src\quickstart_installation.py](file://docs/tutorial/zh_CN/src/quickstart_installation.py)
- [docs\tutorial\zh_CN\src\quickstart_agent.py](file://docs/tutorial/zh_CN/src/quickstart_agent.py)
- [docs\tutorial\zh_CN\src\quickstart_key_concept.py](file://docs/tutorial/zh_CN/src/quickstart_key_concept.py)
- [docs\tutorial\zh_CN\src\quickstart_message.py](file://docs/tutorial/zh_CN/src/quickstart_message.py)
- [examples\agent\react_agent\main.py](file://examples/agent/react_agent/main.py)
- [CONTRIBUTING.md](file://CONTRIBUTING.md)
- [CONTRIBUTING_zh.md](file://CONTRIBUTING_zh.md)
- [tests\config_test.py](file://tests/config_test.py)
</cite>

## 目录
1. [安装](#安装)
2. [环境配置](#环境配置)
3. [第一个智能体](#第一个智能体)
4. [消息交互模式](#消息交互模式)
5. [故障排除](#故障排除)
6. [验证安装](#验证安装)
7. [总结](#总结)

## 安装

AgentScope 支持多种安装方式，包括从 PyPI 安装、从源码安装以及使用 uv 工具进行安装。推荐使用 uv 工具以获得更快的安装速度。

### 从 PyPI 安装

最简单的安装方式是通过 pip 从 PyPI 安装：

```bash
pip install agentscope
```

或者使用 uv（推荐）：

```bash
uv pip install agentscope
```

### 从源码安装

如果需要从源码安装，可以克隆 GitHub 仓库并以可编辑模式安装：

```bash
git clone -b main https://github.com/agentscope-ai/agentscope.git
cd agentscope
pip install -e .
```

使用 uv 安装（推荐）：

```bash
git clone -b main https://github.com/agentscope-ai/agentscope.git
cd agentscope
uv pip install -e .
```

### 额外依赖

AgentScope 提供了额外的依赖项，以满足不同功能的需求：

- **full**: 包含模型 API 和工具函数的额外依赖项
- **dev**: 开发依赖项，包括测试和文档工具

安装 full 模式依赖项：

对于 Windows 用户：
```bash
pip install agentscope[full]
```

对于 Mac 和 Linux 用户：
```bash
pip install agentscope[full]
```

**Section sources**
- [README.md](file://README.md#L139-L200)
- [README_zh.md](file://README_zh.md#L141-L200)
- [pyproject.toml](file://pyproject.toml#L22-L72)

## 环境配置

在使用 AgentScope 之前，需要配置相应的环境变量，特别是 API 密钥。以 DashScope 为例，需要设置 `DASHSCOPE_API_KEY` 环境变量。

### Python 3.10+ 要求

AgentScope 需要 Python 3.10 或更高版本。请确保您的 Python 环境满足此要求。

### 中文和英文环境配置

AgentScope 支持中文和英文环境。您可以通过设置相应的环境变量来配置语言环境。文档和教程提供了中英文版本，可以根据需要选择。

**Section sources**
- [README.md](file://README.md#L164)
- [README_zh.md](file://README_zh.md#L164)

## 第一个智能体

让我们创建一个简单的 ReAct 智能体，它能够与用户进行对话并执行基本任务。

### 初始化框架

首先，需要导入必要的模块并初始化 AgentScope 框架：

```python
from agentscope.agent import ReActAgent, UserAgent
from agentscope.model import DashScopeChatModel
from agentscope.formatter import DashScopeChatFormatter
from agentscope.memory import InMemoryMemory
from agentscope.tool import Toolkit, execute_python_code, execute_shell_command
import os, asyncio
```

### 创建智能体

接下来，创建一个 ReAct 智能体：

```python
async def main():
    toolkit = Toolkit()
    toolkit.register_tool_function(execute_python_code)
    toolkit.register_tool_function(execute_shell_command)

    agent = ReActAgent(
        name="Friday",
        sys_prompt="You're a helpful assistant named Friday.",
        model=DashScopeChatModel(
            model_name="qwen-max",
            api_key=os.environ["DASHSCOPE_API_KEY"],
            stream=True,
        ),
        memory=InMemoryMemory(),
        formatter=DashScopeChatFormatter(),
        toolkit=toolkit,
    )

    user = UserAgent(name="user")

    msg = None
    while True:
        msg = await agent(msg)
        msg = await user(msg)
        if msg.get_text_content() == "exit":
            break

asyncio.run(main())
```

### 代码解释

- **toolkit**: 创建一个工具包，并注册可执行的 Python 代码和 shell 命令的工具函数。
- **ReActAgent**: 创建一个名为 "Friday" 的 ReAct 智能体，配置其系统提示、模型、记忆、格式化器和工具包。
- **UserAgent**: 创建一个用户代理，用于与智能体交互。
- **消息循环**: 智能体和用户代理之间进行消息交换，直到用户输入 "exit"。

**Section sources**
- [docs\tutorial\zh_CN\src\quickstart_agent.py](file://docs/tutorial/zh_CN/src/quickstart_agent.py#L101-L130)
- [examples\agent\react_agent\main.py](file://examples/agent/react_agent/main.py#L18-L50)

## 消息交互模式

AgentScope 使用消息（message）作为核心数据结构，用于在智能体之间交换信息、在用户交互界面显示信息、在记忆中存储信息，以及作为 AgentScope 与不同 LLM API 之间的统一媒介。

### 消息结构

一个消息由四个字段组成：
- **name**: 消息发送者的名称/身份
- **role**: 消息发送者的角色，必须是 "system"、"assistant" 或 "user" 之一
- **content**: 消息包含的数据，可以是字符串或 block 的列表
- **metadata**: 包含额外元数据的字典，通常用于结构化输出

### 创建消息

```python
from agentscope.message import Msg

msg = Msg(
    name="Jarvis",
    role="assistant",
    content="你好！我能怎么帮助你？",
)
```

### 多模态消息

AgentScope 支持多模态内容，包括文本、图像、音频和视频：

```python
from agentscope.message import Msg, TextBlock, ImageBlock, Base64Source

msg = Msg(
    name="Jarvis",
    role="assistant",
    content=[
        TextBlock(
            type="text",
            text="这是一个包含 base64 编码数据的多模态消息。",
        ),
        ImageBlock(
            type="image",
            source=Base64Source(
                type="base64",
                media_type="image/jpeg",
                data="/9j/4AAQSkZ...",
            ),
        ),
    ],
)
```

**Section sources**
- [docs\tutorial\zh_CN\src\quickstart_message.py](file://docs/tutorial/zh_CN/src/quickstart_message.py#L1-L268)

## 故障排除

在安装和使用 AgentScope 时可能会遇到一些常见问题，以下是一些故障排除提示：

### 依赖冲突

如果遇到依赖冲突，特别是 `qdrant-client` 和 `pymilvus` 之间的冲突，可以尝试固定 `qdrant-client` 的版本：

```bash
pip install qdrant-client==1.15.1
```

### API 密钥问题

确保正确设置了 API 密钥环境变量。例如，对于 DashScope，需要设置 `DASHSCOPE_API_KEY`：

```bash
export DASHSCOPE_API_KEY=your_api_key_here
```

### Python 版本问题

确保使用 Python 3.10 或更高版本。可以使用以下命令检查 Python 版本：

```bash
python --version
```

**Section sources**
- [pyproject.toml](file://pyproject.toml#L69-L71)
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L64-L67)

## 验证安装

安装完成后，可以通过以下代码验证 AgentScope 是否正常安装：

```python
import agentscope

print(agentscope.__version__)
```

如果能够成功打印版本号，则说明安装成功。

此外，可以运行测试用例来验证安装：

```bash
pytest tests
```

**Section sources**
- [docs\tutorial\zh_CN\src\quickstart_installation.py](file://docs/tutorial/zh_CN/src/quickstart_installation.py#L29-L31)
- [tests\config_test.py](file://tests/config_test.py#L1-L75)

## 总结

本指南介绍了如何快速入门 AgentScope，包括安装步骤、环境配置、创建第一个智能体、消息交互模式、故障排除和验证安装。AgentScope 提供了一个灵活且强大的多智能体平台，支持从简单对话到复杂工作流的各种应用场景。

**Section sources**
- [README.md](file://README.md#L74-L90)
- [README_zh.md](file://README_zh.md#L76-L92)